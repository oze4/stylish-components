/**
 * Copyright (c) 2020
 *
 * Matt Oestreich
 * matthewpoestreich@gmail.com
 * https://mattoestreich.com
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 * // -----------------------------------------------------------------------------------
 *
 * css.js
 * The MIT License (MIT)
 *
 * Copyright (c) 2015 JotForm
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 * // -----------------------------------------------------------------------------------
 *
 * styled-components/styled-components
 * ONE FILE IN THIS REPO HAS BEEN MODIFIED FROM styled-components. PLEASE SEE THE
 * FOLLOWING FILE, WHICH WAS MODIFIED:
 * https://github.com/styled-components/styled-components/blob/v3.3.3/src/utils/generateAlphabeticName.js
 */

import e,{Component as t}from"react";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function u(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return function(){var t,r=c(e);if(l()){var n=c(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return u(this,t)}}var f=function(e){return String.fromCharCode(e+(e>25?39:97))},h=function(){var e=Math.floor(9999999999999*Math.random());return"stylished-".concat(function(e){var t,r="";for(t=e;t>52;t=Math.floor(t/52))r=f(t%52)+r;return f(t%52)+r}(e))},y=function(){var e=document.createElement("style");e.setAttribute("data-stylished","0.1.4"),document.head.appendChild(e)},v=function(){return document.querySelector("style[data-stylished]")},d=function(e){return e.replace(/\n/g,"").replace(/\s+/g," ")},m=function(e){return d(e).match(/((@media [\s]*).*?[^}]*}.*?})/g)};var g,S=new((g=function(){this.cssImportStatements=[],this.cssKeyframeStatements=[],this.cssRegex=new RegExp("([\\s\\S]*?){([\\s\\S]*?)}","gi"),this.cssMediaQueryRegex="((@media [\\s\\S]*?){([\\s\\S]*?}\\s*?)})",this.cssKeyframeRegex="((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})",this.combinedCSSRegex="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",this.cssCommentsRegex="(\\/\\*[\\s\\S]*?\\*\\/)",this.cssImportStatementRegex=new RegExp("@import .*?;","gi")}).prototype.stripComments=function(e){var t=new RegExp(this.cssCommentsRegex,"gi");return e.replace(t,"")},g.prototype.parseCSS=function(e){if(void 0===e)return[];for(var t=[];;){var r=this.cssImportStatementRegex.exec(e);if(null===r)break;this.cssImportStatements.push(r[0]),t.push({selector:"@imports",type:"imports",styles:r[0]})}e=e.replace(this.cssImportStatementRegex,"");for(var n,s=new RegExp(this.cssKeyframeRegex,"gi");null!==(n=s.exec(e));)t.push({selector:"@keyframes",type:"keyframes",styles:n[0]});e=e.replace(s,"");for(var o=new RegExp(this.combinedCSSRegex,"gi");null!==(n=o.exec(e));){var i="";i=void 0===n[2]?n[5].split("\r\n").join("\n").trim():n[2].split("\r\n").join("\n").trim();var c=new RegExp(this.cssCommentsRegex,"gi"),a=c.exec(i);if(null!==a&&(i=i.replace(c,"").trim()),-1!==(i=i.replace(/\n+/,"\n")).indexOf("@media")){var l={selector:i,type:"media",subStyles:this.parseCSS(n[3]+"\n}")};null!==a&&(l.comments=a[0]),t.push(l)}else{var u={selector:i,rules:this.parseRules(n[6])};"@font-face"===i&&(u.type="font-face"),null!==a&&(u.comments=a[0]),t.push(u)}}return t},g.prototype.parseRules=function(e){var t=[];e=(e=e.split("\r\n").join("\n")).split(";");for(var r=0;r<e.length;r++){var n=e[r];if(-1!==(n=n.trim()).indexOf(":")){var s=(n=n.split(":"))[0].trim(),o=n.slice(1).join(":").trim();if(s.length<1||o.length<1)continue;t.push({directive:s,value:o})}else"base64,"===n.trim().substr(0,7)?t[t.length-1].value+=n.trim():n.length>0&&t.push({directive:"",value:n,defective:!0})}return t},g.prototype.findCorrespondingRule=function(e,t,r){void 0===r&&(r=!1);for(var n=!1,s=0;s<e.length&&(e[s].directive!==t||(n=e[s],r!==e[s].value));s++);return n},g.prototype.findBySelector=function(e,t,r){void 0===r&&(r=!1);for(var n=[],s=0;s<e.length;s++)!1===r?e[s].selector===t&&n.push(e[s]):-1!==e[s].selector.indexOf(t)&&n.push(e[s]);if("@imports"===t||n.length<2)return n;var o=n[0];for(s=1;s<n.length;s++)this.intelligentCSSPush([o],n[s]);return[o]},g.prototype.deleteBySelector=function(e,t){for(var r=[],n=0;n<e.length;n++)e[n].selector!==t&&r.push(e[n]);return r},g.prototype.compressCSS=function(e){for(var t=[],r={},n=0;n<e.length;n++){var s=e[n];if(!0!==r[s.selector]){var o=this.findBySelector(e,s.selector);0!==o.length&&(t=t.concat(o),r[s.selector]=!0)}}return t},g.prototype.cssDiff=function(e,t){if(e.selector!==t.selector)return!1;if("media"===e.type||"media"===t.type)return!1;for(var r,n,s={selector:e.selector,rules:[]},o=0;o<e.rules.length;o++)r=e.rules[o],(!1===(n=this.findCorrespondingRule(t.rules,r.directive,r.value))||r.value!==n.value)&&s.rules.push(r);for(var i=0;i<t.rules.length;i++)n=t.rules[i],!1===(r=this.findCorrespondingRule(e.rules,n.directive))&&(n.type="DELETED",s.rules.push(n));return 0!==s.rules.length&&s},g.prototype.intelligentMerge=function(e,t,r){void 0===r&&(r=!1);for(var n=0;n<t.length;n++)this.intelligentCSSPush(e,t[n],r);for(n=0;n<e.length;n++){var s=e[n];"media"!==s.type&&"keyframes"!==s.type&&(s.rules=this.compactRules(s.rules))}},g.prototype.intelligentCSSPush=function(e,t,r){var n=t.selector,s=!1;if(void 0===r&&(r=!1),!1===r){for(var o=0;o<e.length;o++)if(e[o].selector===n){s=e[o];break}}else for(var i=e.length-1;i>-1;i--)if(e[i].selector===n){s=e[i];break}if(!1===s)e.push(t);else if("media"!==t.type)for(var c=0;c<t.rules.length;c++){var a=t.rules[c],l=this.findCorrespondingRule(s.rules,a.directive);!1===l?s.rules.push(a):"DELETED"===a.type?l.type="DELETED":l.value=a.value}else s.subStyles=s.subStyles.concat(t.subStyles)},g.prototype.compactRules=function(e){for(var t=[],r=0;r<e.length;r++)"DELETED"!==e[r].type&&t.push(e[r]);return t},g.prototype.getCSSForEditor=function(e,t){void 0===t&&(t=0);var r="";void 0===e&&(e=this.css);for(var n=0;n<e.length;n++)"imports"===e[n].type&&(r+=e[n].styles+"\n\n");for(n=0;n<e.length;n++){var s=e[n];if(void 0!==s.selector){var o="";void 0!==s.comments&&(o=s.comments+"\n"),"media"===s.type?(r+=o+s.selector+"{\n",r+=this.getCSSForEditor(s.subStyles,t+1),r+="}\n\n"):"keyframes"!==s.type&&"imports"!==s.type&&(r+=this.getSpaces(t)+o+s.selector+" {\n",r+=this.getCSSOfRules(s.rules,t+1),r+=this.getSpaces(t)+"}\n\n")}}for(n=0;n<e.length;n++)"keyframes"===e[n].type&&(r+=e[n].styles+"\n\n");return r},g.prototype.getImports=function(e){for(var t=[],r=0;r<e.length;r++)"imports"===e[r].type&&t.push(e[r].styles);return t},g.prototype.getCSSOfRules=function(e,t){for(var r="",n=0;n<e.length;n++)void 0!==e[n]&&(void 0===e[n].defective?r+=this.getSpaces(t)+e[n].directive+": "+e[n].value+";\n":r+=this.getSpaces(t)+e[n].value+";\n");return r||"\n"},g.prototype.getSpaces=function(e){for(var t="",r=0;r<4*e;r++)t+=" ";return t},g.prototype.applyNamespacing=function(e,t){var r=e,n="."+this.cssPreviewNamespace;void 0!==t&&(n=t),"string"==typeof e&&(r=this.parseCSS(e));for(var s=0;s<r.length;s++){var o=r[s];if(!(o.selector.indexOf("@font-face")>-1||o.selector.indexOf("keyframes")>-1||o.selector.indexOf("@import")>-1||o.selector.indexOf(".form-all")>-1||o.selector.indexOf("#stage")>-1))if("media"!==o.type){for(var i=o.selector.split(","),c=[],a=0;a<i.length;a++)-1===i[a].indexOf(".supernova")?c.push(n+" "+i[a]):c.push(i[a]);o.selector=c.join(",")}else o.subStyles=this.applyNamespacing(o.subStyles,t)}return r},g.prototype.clearNamespacing=function(e,t){void 0===t&&(t=!1);var r=e,n="."+this.cssPreviewNamespace;"string"==typeof e&&(r=this.parseCSS(e));for(var s=0;s<r.length;s++){var o=r[s];if("media"!==o.type){for(var i=o.selector.split(","),c=[],a=0;a<i.length;a++)c.push(i[a].split(n+" ").join(""));o.selector=c.join(",")}else o.subStyles=this.clearNamespacing(o.subStyles,!0)}return!1===t?this.getCSSForEditor(r):r},g.prototype.createStyleElement=function(e,t,r){if(void 0===r&&(r=!1),!1===this.testMode&&"nonamespace"!==r&&(t=this.applyNamespacing(t)),"string"!=typeof t&&(t=this.getCSSForEditor(t)),!0===r&&(t=this.getCSSForEditor(this.parseCSS(t))),!1!==this.testMode)return this.testMode("create style #"+e,t);var n=document.getElementById(e);n&&n.parentNode.removeChild(n);var s=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.id=e,o.type="text/css",s.appendChild(o),o.styleSheet&&!o.sheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))},g);export default function(n){return function(c){for(var a=arguments.length,l=new Array(a>1?a-1:0),u=1;u<a;u++)l[u-1]=arguments[u];return function(a){i(f,t);var u=p(f);function f(){return r(this,f),u.apply(this,arguments)}return s(f,[{key:"init",value:function(){var e=this,t=l.reduce((function(t,r,n){return t+("function"==typeof r?r(e.props):r)+c[n+1]}),c[0]),r=h(),n=d(t),s=m(n);s&&s.forEach((function(e){return n=n.replace(e,"")}));var o=".".concat(r," {").concat(n,"}");s&&s.length&&S.parseCSS(s.join("")).forEach((function(e){var t="".concat(e.selector," { .").concat(r," {");e.subStyles.forEach((function(e){e.rules.forEach((function(e){t+="".concat(e.directive,": ").concat(e.value,";")}))})),o+=t+="}}"}));var i=v();i||(y(),i=v()),this.element.setAttribute("class",r),i.textContent+=o}},{key:"componentDidMount",value:function(){this.init()}},{key:"componentDidUpdate",value:function(){this.init()}},{key:"render",value:function(){var t=this;return e.createElement(n,o({},this.props,{ref:function(e){return t.element=e}}))}}]),f}()}}
